<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Rooms</title>

  <script>
    if (localStorage.getItem("auth") !== "ok") {
      location.replace("/password.html");
    }
  </script>

  <link rel="stylesheet" href="/style.css">
  <script defer src="/rooms.js"></script>
</head>
<body>
  <div class="chat-wrapper" style="max-width:720px;">
    <div class="chat-header">
      <div class="title">Rooms</div>
      <div class="header-controls">
        <button id="logoutBtn" class="settings-btn" title="ログアウト">⎋</button>
      </div>
    </div>

    <div style="padding:14px; display:flex; gap:10px; flex-wrap:wrap; align-items:flex-start;">
      <div class="room-card">
        <h3>部屋を作る</h3>
        <input id="createRoomName" class="setup-input" placeholder="部屋名（英数-_）" maxlength="40">
        <input id="createRoomPass" class="setup-input" placeholder="部屋パスワード" type="password">
        <button id="createRoomBtn" class="send-btn" style="width:100%;">作成</button>
        <div id="createMsg" class="hint" style="min-height:1.4em;"></div>
      </div>

      <div class="room-card">
        <h3>部屋に参加</h3>
        <div id="roomsList" class="rooms-list">読み込み中…</div>
        <div id="joinBox" style="display:none; margin-top:10px;">
          <div id="selectedRoom" class="hint"></div>
          <input id="joinRoomPass" class="setup-input" placeholder="部屋パスワード" type="password">
          <button id="joinRoomBtn" class="send-btn" style="width:100%;">入室</button>
          <div id="joinMsg" class="hint" style="min-height:1.4em;"></div>
        </div>
      </div>

      <div class="room-card" style="flex-basis:100%;">
        <h3>最近入った部屋</h3>
        <div id="recentRooms" class="rooms-list">なし</div>
      </div>
    </div>
  </div>
</body>
</html>
